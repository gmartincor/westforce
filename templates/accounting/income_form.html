{% extends 'base.html' %}

{% block title %}{% if form.instance.pk %}Edit{% else %}Create{% endif %} Income - Westforce{% endblock %}

{% block page_header %}
<div class="flex justify-between items-center mb-6">
    <div>
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
            {% if form.instance.pk %}Edit Income Record{% else %}New Income Record{% endif %}
        </h1>
        <p class="mt-2 text-gray-600 dark:text-gray-400">
            {% if form.instance.pk %}Update the details of this income record{% else %}Add income from a completed moving service{% endif %}
        </p>
    </div>
    <a href="{% url 'accounting:income_list' %}" 
       class="bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg transition-colors font-medium flex items-center">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Income List
    </a>
</div>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
        <form method="post" class="p-6 space-y-6">
            {% csrf_token %}
            
            {% include 'components/forms/errors.html' %}
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-gray-700">
                        Service Information
                    </h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {% include 'components/forms/field.html' with field=form.service_type %}
                        {% include 'components/forms/field.html' with field=form.client_name %}
                    </div>
                    <div class="mt-6">
                        {% include 'components/forms/field.html' with field=form.description help_text="Optional details about the moving service" %}
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-gray-700">
                        Financial Information
                    </h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {% include 'components/forms/field.html' with field=form.amount help_text="Amount in AUD" %}
                        {% include 'components/forms/field.html' with field=form.date help_text="Date when the service was completed" %}
                        {% include 'components/forms/field.html' with field=form.payment_method %}
                        {% include 'components/forms/field.html' with field=form.reference_number help_text="Optional invoice or job reference" %}
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-gray-700">
                        Location Information
                    </h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {% include 'components/forms/field.html' with field=form.pickup_address help_text="Where items were collected from" %}
                        {% include 'components/forms/field.html' with field=form.delivery_address help_text="Where items were delivered to" %}
                    </div>
                </div>
            </div>

            {% include 'components/forms/actions.html' with cancel_url_name='accounting:income_list' submit_text=form.instance.pk|yesno:"Update Income Record,Save Income Record" %}
        </form>
    </div>
</div>
{% endblock %}
